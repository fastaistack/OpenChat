import{s as V}from"./fileupload.esm-B7fQteDh.js";import{a5 as E,r as h,D as I,c as i,o as a,d as r,l as g,j as f,a as l,x as v,t as d,F as L,k as A,H,b,s as P,e as k}from"./index-_H2thqG8.js";import{_ as q,f as G}from"./_plugin-vue_export-helper-DeIMcAHb.js";import{l as J}from"./knowledge-CxFknXKU.js";import{g as K,f as M}from"./FileIcon-DuMi2Wuy.js";const O={class:"uploader-container"},Q={class:"flex flex-wrap justify-between items-center flex-1 gap-2"},W={class:"flex gap-2"},X={key:0,class:"max-h-[300px] overflow-auto"},Y={class:"flex flex-wrap p-0 gap-3"},Z={class:"flex flex-wrap gap-3 items-center"},ee=["src"],te={class:"font-semibold file-title"},le={class:"flex items-center content-center flex-col border border-dashed p-2"},se={class:"mt-4 mb-0 text-center"},oe={key:0,class:"flex items-center justify-end space-x-4 mt-4"},ne={__name:"UploadFile",props:{id:{type:String,default:""},showButton:{type:Boolean,default:!1}},emits:["hide","success"],setup(x,{expose:y,emit:F}){const w=E(),C=x,o=h([]),$=(e,s,n)=>{s(n)},S=e=>{o.value=[],e()};function B(e){o.value=e.files}const T=e=>{o.value=e.files},_=F,p=h(!1),j=()=>{console.log("upload",o.value);const e=new FormData;e.append("id",C.id),o.value.forEach(s=>{e.append("files",s)}),p.value=!0,J(e).then(()=>{w.add({severity:"success",summary:k("kb.success"),detail:k("kb.importSuccess"),life:3e3}),_("success")}).finally(()=>{p.value=!1})};function D(){_("hide")}function R(){return new Promise(e=>{e(o.value)})}function U(e){const s=K(e);return M(s)}return y({getSelectedFiles:R}),(e,s)=>{const n=P,z=V,N=I("tooltip");return a(),i("div",O,[r(z,{name:"uploader",url:"",multiple:!0,accept:".pdf,.doc,.docx,.txt,.html,.htm,.md,.json,.jsonl,.epub,.mobi,.xml,.pptx",fileLimit:200,maxFileSize:500*1024*1024,onRemove:B,onSelect:T},{header:f(({chooseCallback:c,clearCallback:u,files:t})=>[l("div",Q,[l("div",W,[r(n,{onClick:m=>c(),icon:"pi pi-plus",label:e.$t("kb.selectFile")},null,8,["onClick","label"]),r(n,{onClick:m=>S(u),icon:"pi pi-times",label:e.$t("kb.clearAll"),severity:"danger",disabled:!t||t.length===0},null,8,["onClick","label","disabled"])])])]),content:f(({files:c,removeFileCallback:u})=>[c.length>0?(a(),i("div",X,[l("div",Y,[(a(!0),i(L,null,A(c,(t,m)=>(a(),i("div",{key:t.name+t.type+t.size,class:"m-0 px-3 w-full flex justify-between border border-solid border-slate-300 rounded items-center gap-3"},[l("div",Z,[l("img",{src:U(t.name),alt:"",style:{width:"35px"}},null,8,ee),l("div",null,[H((a(),i("div",te,[v(d(t.name),1)])),[[N,t.name]]),l("div",null,d(b(G)(t.size)),1)])]),r(n,{icon:"pi pi-times",onClick:ie=>$(t,u,m),rounded:"",text:"",severity:"danger"},null,8,["onClick"])]))),128))])])):g("",!0)]),empty:f(()=>[l("div",le,[s[1]||(s[1]=l("i",{class:"pi pi-cloud-upload border border-solid border-slate-300 text-slate-300 rounded-full p-5 text-8xl"},null,-1)),l("p",se,[v(d(e.$t("kb.uploadFileTip1")),1),s[0]||(s[0]=l("br",null,null,-1)),v(d(e.$t("kb.uploadFileTip2")),1)])])]),_:1}),x.showButton?(a(),i("div",oe,[r(n,{label:e.$t("lang.cancel"),severity:"secondary",onClick:D},null,8,["label"]),r(n,{label:e.$t("kb.import"),onClick:j,disabled:b(o).length===0||b(p)},null,8,["label","disabled"])])):g("",!0)])}}},ue=q(ne,[["__scopeId","data-v-707dbfc2"]]);export{ue as U};
