import{ag as R,P as G,r as b,f as r,Q as z,c as i,o as l,a,E as U,aa as C,v as H,D as Q,m as J,l as S,d as q,t as u,j as I,b as s,x,H as O,s as K,ah as X}from"./index-DFcxYj_y.js";function Y(){return Math.random().toString(16).substring(2)}var M=R({props:{diameter:{type:Number,required:!1,default:200},totalSteps:{type:Number,required:!0,default:10},completedSteps:{type:Number,required:!0,default:0},startColor:{type:String,required:!1,default:"#00C58E"},stopColor:{type:String,required:!1,default:"#00E0A1"},innerStrokeColor:{type:String,required:!1,default:"#2F495E"},strokeWidth:{type:Number,required:!1,default:10},innerStrokeWidth:{type:Number,required:!1,default:10},strokeLinecap:{type:String,required:!1,default:"round"},animateSpeed:{type:Number,required:!1,default:1e3},fps:{type:Number,required:!1,default:60},timingFunc:{type:String,required:!1,default:"linear"},isClockwise:{type:Boolean,required:!1,default:!0}},setup(e){const t=G({fx:.99,fy:.5,cx:.5,cy:.5,r:.65}),d=`rg-${Y()}`,n=b(0),o=b(0),m=b(null),$=r(()=>e.diameter/2),f=r(()=>e.diameter-e.innerStrokeWidth*2),h=r(()=>Math.PI*f.value),N=r(()=>e.totalSteps===0?0:100/e.totalSteps),w=r(()=>N.value*e.completedSteps),y=r(()=>2*Math.PI/e.totalSteps),v=r(()=>100/e.fps),g=r(()=>e.animateSpeed/v.value),E=r(()=>y.value/g.value),D=r(()=>f.value/2),P=r(()=>({height:`${e.diameter}px`,width:`${e.diameter}px`})),A=r(()=>({height:`${e.diameter}px`,width:`${e.diameter}px`,strokeWidth:`${e.strokeWidth}px`,strokeDashoffset:n.value,transition:`stroke-dashoffset ${e.animateSpeed}ms ${e.timingFunc}`})),B=r(()=>({height:`${e.diameter}px`,width:`${e.diameter}px`,strokeWidth:`${e.innerStrokeWidth}px`})),T=r(()=>({width:`${f.value}px`}));z(()=>[e.diameter,e.totalSteps,e.completedSteps,e.strokeWidth],L,{immediate:!0});function j(c){const _=.5+.5*Math.cos(c),k=.5+.5*Math.sin(c);return{x:_,y:k}}function W(){const c=j(o.value);c.x&&c.y&&(t.fx=c.x,t.fy=c.y)}function F(){return e.isClockwise?1:-1}function L(){n.value=(100-w.value)/100*h.value*F(),m.value&&clearInterval(m.value);const c=(e.completedSteps-1)*y.value;let p=(o.value-c)/E.value;const _=Math.abs(p-g.value)/g.value,k=p<g.value;m.value=setInterval(()=>{if(k&&p>=g.value||!k&&p<g.value){m.value&&clearInterval(m.value);return}o.value=c+E.value*p,W(),p+=k?_:-_},v.value)}return{gradientAnimation:m,innerCircleRadius:D,radialGradientId:d,strokeDashoffset:n,innerCircleStyle:T,containerStyle:P,circumference:h,progressStyle:A,currentAngle:o,strokeStyle:B,gradient:t,radius:$}}});const Z=["width","height"],ee=["id","fx","fy","cx","cy","r"],te=["stop-color"],se=["stop-color"],oe=["r","cx","cy","stroke","stroke-dasharray","stroke-linecap"],re=["transform","r","cx","cy","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap"];function ae(e,t,d,n,o,m){return l(),i("div",{class:"vrp__wrapper",style:C(e.containerStyle)},[a("div",{class:"vrp__inner",style:C(e.innerCircleStyle)},[U(e.$slots,"default")],4),(l(),i("svg",{width:e.diameter,height:e.diameter,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[a("defs",null,[a("radialGradient",{id:e.radialGradientId,fx:e.gradient.fx,fy:e.gradient.fy,cx:e.gradient.cx,cy:e.gradient.cy,r:e.gradient.r},[a("stop",{offset:"30%","stop-color":e.startColor},null,8,te),a("stop",{offset:"100%","stop-color":e.stopColor},null,8,se)],8,ee)]),a("circle",{r:e.innerCircleRadius,cx:e.radius,cy:e.radius,fill:"transparent",stroke:e.innerStrokeColor,"stroke-dasharray":e.circumference,"stroke-dashoffset":"0","stroke-linecap":e.strokeLinecap,style:C(e.strokeStyle)},null,12,oe),a("circle",{transform:"rotate(270, "+e.radius+","+e.radius+")",r:e.innerCircleRadius,cx:e.radius,cy:e.radius,fill:"transparent",stroke:`url('#${e.radialGradientId}')`,"stroke-dasharray":e.circumference,"stroke-dashoffset":e.circumference,"stroke-linecap":e.strokeLinecap,style:C(e.progressStyle)},null,12,re)],8,Z))],4)}function ne(e,t){t===void 0&&(t={});var d=t.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",d==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var le=`
.vrp__wrapper[data-v-6a0cf1f6] {\r
  position: relative;
}
.vrp__inner[data-v-6a0cf1f6] {\r
  position: absolute;\r
  top: 0;\r
  right: 0;\r
  bottom: 0;\r
  left: 0;\r
  border-radius: 50%;\r
  margin: 0 auto;\r
  display: flex;\r
  flex-direction: column;\r
  align-items: center;\r
  justify-content: center;
}\r
`;ne(le);M.render=ae;M.__scopeId="data-v-6a0cf1f6";var V=(()=>{const e=M;return e.install=t=>{t.component("RadialProgressBar",e)},e})();const ie={class:"flex flex-col items-center justify-center"},de={class:"flex items-center justify-center gap-12 p-10 pt-4"},ce={class:"model flex flex-col items-center justify-start"},ue={class:"w-18 shrink-0 grow-0 font-bold text-lg mb-4"},me={class:""},fe={key:0},pe={key:1,class:"text-sm font-semibold text-primary-400"},ge={key:2,class:"text-sm font-semibold text-red-500"},he={key:0,class:"pi pi-question-circle ml-2"},ye={class:"knowledge flex flex-col items-center justify-start"},ve={class:"w-18 shrink-0 grow-0 font-bold text-lg mb-4"},ke={class:""},Se={key:0},we={key:1,class:"text-sm font-semibold text-primary-400"},_e={key:2,class:"text-sm font-semibold text-red-500"},Ce={key:0,class:"pi pi-question-circle ml-2"},Ne={__name:"Migrating",setup(e){const t=G({knowledge:{status:"MOVING",message:"",total:0,moved:0},model:{status:"MOVING",message:"",total:0,moved:0}});let d;function n(){return clearTimeout(d),d=null,X().then(({resData:f})=>{if(t.knowledge=f.knowledge,t.model=f.model,t.knowledge.status!=="MOVING"&&t.model.status!=="MOVING"){clearTimeout(d),d=null;return}d=setTimeout(()=>{n()},3e3)})}n();const o={SUCCESS:{start:"#67e8f9",stop:"#00E0A1"},FAILED:{start:"#f97316",stop:"#dc2626"},MOVING:{start:"#d97706",stop:"#1d4ed8"},NOT_MOVED:{start:"#67e8f9",stop:"#00E0A1"}},m=H("dialogRef");function $(){m.value.close()}return(f,h)=>{var y,v;const N=K,w=Q("tooltip");return l(),i("div",ie,[a("div",de,[a("div",ce,[a("div",ue,u(f.$t("lang.model")),1),q(s(V),{diameter:150,"completed-steps":s(t).model.moved,"total-steps":s(t).model.total,"start-color":(y=o[s(t).model.status])==null?void 0:y.start,"stop-color":(v=o[s(t).model.status])==null?void 0:v.stop},{default:I(()=>[a("div",me,[s(t).model.status==="MOVING"?(l(),i("span",fe,u(s(t).model.moved)+" / "+u(s(t).model.total),1)):s(t).model.status==="SUCCESS"||s(t).model.status==="NOT_MOVED"?(l(),i("span",pe,u(s(t).model.status),1)):s(t).model.status==="FAILED"?(l(),i("span",ge,[x(u(s(t).model.status)+" ",1),s(t).model.message?O((l(),i("i",he,null,512)),[[w,s(t).model.message]]):S("",!0)])):S("",!0)])]),_:1},8,["completed-steps","total-steps","start-color","stop-color"])]),a("div",ye,[a("div",ve,u(f.$t("kb.knowledgeBase")),1),q(s(V),{diameter:150,"completed-steps":s(t).knowledge.moved,"total-steps":s(t).knowledge.total,"start-color":o[s(t).knowledge.status].start,"stop-color":o[s(t).knowledge.status].stop},{default:I(()=>[a("div",ke,[s(t).knowledge.status==="MOVING"?(l(),i("span",Se,u(s(t).knowledge.moved)+" / "+u(s(t).knowledge.total),1)):s(t).knowledge.status==="SUCCESS"?(l(),i("span",we,u(s(t).knowledge.status),1)):s(t).knowledge.status==="FAILED"?(l(),i("span",_e,[x(u(s(t).knowledge.status)+" ",1),s(t).knowledge.message?O((l(),i("i",Ce,null,512)),[[w,s(t).knowledge.message]]):S("",!0)])):S("",!0)])]),_:1},8,["completed-steps","total-steps","start-color","stop-color"])])]),s(t).knowledge.status!=="MOVING"&&s(t).model.status!=="MOVING"?(l(),J(N,{key:0,class:"self-end",severity:"secondary",onClick:$},{default:I(()=>h[0]||(h[0]=[x("关闭 ")])),_:1})):S("",!0)])}}};export{Ne as default};
