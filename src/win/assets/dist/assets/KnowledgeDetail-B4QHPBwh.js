import{r as i,a5 as X,u as Y,g as ee,A as te,c as S,a as c,d as o,b as t,h as le,s as ae,t as u,j as n,i as V,V as ie,F as oe,e as r,Z as B,D as se,o as h,H as ne,x as I,m as K,l as N}from"./index-C4IDSyN5.js";import{a as re,b as de,g as F,f as ce}from"./FileIcon-BjFaAGUe.js";import{U as ue}from"./UploadFile-D0MMY2xc.js";import{_ as pe}from"./FileViewer-Dk77B4-v.js";import{i as fe,j as me}from"./knowledge-JFy0f9oy.js";import{_ as be}from"./_plugin-vue_export-helper-D899kGel.js";import"./dropdown.esm-BbE1jaVP.js";import"./index.esm-B3dA7Rb7.js";import"./fileupload.esm-DYGYzEPu.js";const ge={class:"w-full m-5 h-full overflow-y-auto flex flex-col items-start justify-start overflow-x-hidden"},ve={class:"flex justify-between items-center my-5 w-full"},he={class:"font-bold text-xl"},ke={class:"flex items-center"},we=["src"],ye={class:"file-title"},_e={__name:"KnowledgeDetail",setup(Fe){const L=i(["pdf","docx","txt","html","htm","md","json","jsonl","xml"]),H=X(),U=Y(),q=le(),$=ee(),x=i([]),p=i(0),k=$.query.id,P=$.query.name;function E(e,l){U.require({target:e.currentTarget,message:r("kb.deleteConfirmMsg"),icon:"pi pi-info-circle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-danger p-button-sm",rejectLabel:r("lang.cancel"),acceptLabel:r("kb.delete"),accept:()=>{me(l.id).then(()=>{H.add({severity:"success",summary:r("kb.success"),detail:r("kb.deleteSuccess"),life:3e3}),z()})}})}const s=i(!1),w=i(""),y=i(!1),f=i(!1);function C(){s.value=!1,D()}function D(){m.value="",y.value=!1,f.value=!1}function M(){C(),z()}function A(){s.value=!0,w.value=r("kb.importFile"),B(()=>{y.value=!0})}const T=i(""),m=i(""),R=i("");function O(e){R.value=e.id,T.value=e.name,m.value=F(T.value),s.value=!0,w.value=e.name,B(()=>{f.value=!0})}let d={page:1,pageSize:10};function _(){k&&fe({id:k,page:d.page,pagesize:d.pageSize}).then(e=>{const l=e.resData;x.value=l.data,p.value=l.total})}const b=i(0);function z(){d.page=1,b.value=0,_()}function Z(e){d.page=e.page+1,d.pageSize=e.rows,_()}function G(e){const l=F(e);return ce(l)}return te(()=>{_()}),(e,l)=>{const g=ae,v=de,J=re,Q=ie,W=se("tooltip");return h(),S(oe,null,[c("div",ge,[c("div",ve,[o(g,{text:"",icon:"pi pi-angle-left",label:e.$t("kb.returnKb"),onClick:l[0]||(l[0]=a=>t(q).replace("/knowledge"))},null,8,["label"]),c("span",he,u(t(P)),1),o(g,{icon:"pi pi-upload",label:e.$t("kb.importFile"),onClick:A},null,8,["label"])]),o(J,{lazy:"",value:t(x),paginator:t(p)>0,first:t(b),"onUpdate:first":l[1]||(l[1]=a=>V(b)?b.value=a:null),rows:10,rowsPerPageOptions:[10,20,30],totalRecords:t(p),stripedRows:"",rowHover:"",resizableColumns:"",dataKey:"id",tableStyle:"min-width: 50rem",onPage:Z,pt:{root:{style:{width:"100%"}}}},{paginatorstart:n(()=>l[3]||(l[3]=[])),paginatorend:n(()=>[I(u(e.$t("kb.total"))+" "+u(t(p))+" "+u(e.$t("kb.items")),1)]),default:n(()=>[o(v,{field:"name",header:e.$t("kb.name")},{body:n(({data:a})=>[c("div",ke,[c("img",{src:G(a.name),alt:"",style:{width:"25px","margin-right":"5px"}},null,8,we),ne((h(),S("div",ye,[I(u(a.name),1)])),[[W,a.name]])])]),_:1},8,["header"]),o(v,{field:"size",header:e.$t("kb.fileSize")},null,8,["header"]),o(v,{field:"createtime",header:e.$t("kb.uploadTime")},null,8,["header"]),o(v,{field:"operation",header:e.$t("kb.operation")},{body:n(a=>[o(g,{label:e.$t("kb.viewFile"),text:"",disabled:!t(L).includes(t(F)(a.data.name)),onClick:j=>O(a.data)},null,8,["label","disabled","onClick"]),o(g,{label:e.$t("kb.delete"),text:"",severity:"danger",onClick:j=>E(j,a.data)},null,8,["label","onClick"])]),_:1},8,["header"])]),_:1},8,["value","paginator","first","totalRecords"])]),o(Q,{visible:t(s),"onUpdate:visible":l[2]||(l[2]=a=>V(s)?s.value=a:null),modal:"",maximizable:t(f),header:t(w),class:"w-[50%] min-w-96","content-style":t(m)==="pdf"?"height:100vh;":"min-height:200px",onHide:D},{default:n(()=>[t(f)?(h(),K(pe,{key:0,ref:"fileViewerRef",fileId:t(R),fileType:t(m)},null,8,["fileId","fileType"])):N("",!0),t(y)?(h(),K(ue,{key:1,ref:"uploadFileRef",id:t(k),showButton:!0,onHide:C,onSuccess:M},null,8,["id"])):N("",!0)]),_:1},8,["visible","maximizable","header","content-style"])],64)}}},Ve=be(_e,[["__scopeId","data-v-d428678c"]]);export{Ve as default};
